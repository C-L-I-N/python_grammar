# 📘 Day 13 - 列表推导式与Lambda函数

---

## 🎯 列表推导式 (List Comprehension)

列表推导式是一种从序列创建列表的紧凑方式。比起 `for` 循环，列表推导式**执行速度更快**，代码更简洁！

### 基本语法

```python
# 语法
[表达式 for 变量 in 可迭代对象 if 条件]
```

---

### 示例1：字符串转列表

```python
# 传统方式
language = 'Python'
lst = list(language)
print(lst)  # ['P', 'y', 't', 'h', 'o', 'n']

# 列表推导式方式 ✨
lst = [i for i in language]
print(lst)  # ['P', 'y', 't', 'h', 'o', 'n']
```

---

### 示例2：生成数字列表

```python
# 生成0-10的数字
numbers = [i for i in range(11)]
print(numbers)  # [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10]

# 生成平方数 🔢
squares = [i * i for i in range(11)]
print(squares)  # [0, 1, 4, 9, 16, 25, 36, 49, 64, 81, 100]

# 生成元组列表
numbers = [(i, i * i) for i in range(11)]
print(numbers)  # [(0, 0), (1, 1), (2, 4), (3, 9), (4, 16), ...]
```

---

### 示例3：带条件过滤

```python
# 生成偶数 ✅
even_numbers = [i for i in range(21) if i % 2 == 0]
print(even_numbers)  # [0, 2, 4, 6, 8, 10, 12, 14, 16, 18, 20]

# 生成奇数
odd_numbers = [i for i in range(21) if i % 2 != 0]
print(odd_numbers)  # [1, 3, 5, 7, 9, 11, 13, 15, 17, 19]

# 过滤正偶数
numbers = [-8, -7, -3, -1, 0, 1, 3, 4, 5, 7, 6, 8, 10]
positive_even = [i for i in numbers if i % 2 == 0 and i > 0]
print(positive_even)  # [4, 6, 8, 10]
```

---

### 示例4：展平嵌套列表 🔄

```python
# 二维列表展平为一维
list_of_lists = [[1, 2, 3], [4, 5, 6], [7, 8, 9]]
flattened = [number for row in list_of_lists for number in row]
print(flattened)  # [1, 2, 3, 4, 5, 6, 7, 8, 9]
```

> 💡 **理解技巧**：从左到右阅读，就像嵌套的for循环！

---

## 🔥 Lambda 函数（匿名函数）

Lambda是一种**小型匿名函数**，没有名字，可以接收任意数量的参数，但只能有**一个表达式**。

### 基本语法

```python
# 语法
lambda 参数1, 参数2, ... : 表达式
```

### 示例：普通函数 vs Lambda

```python
# 普通函数
def add_two_nums(a, b):
    return a + b

print(add_two_nums(2, 3))  # 5

# Lambda 函数 ✨
add_two_nums = lambda a, b: a + b
print(add_two_nums(2, 3))  # 5
```

### 更多Lambda示例

```python
# 平方
square = lambda x: x ** 2
print(square(3))  # 9

# 立方
cube = lambda x: x ** 3
print(cube(3))  # 27

# 多参数
calculate = lambda a, b, c: a ** 2 - 3 * b + 4 * c
print(calculate(5, 5, 3))  # 25 - 15 + 12 = 22

# 自调用Lambda（立即执行）
result = (lambda a, b: a + b)(2, 3)
print(result)  # 5
```

---

### Lambda嵌套在函数中 🏗️

```python
def power(x):
    return lambda n: x ** n

# 使用
cube = power(2)(3)      # 2^3
print(cube)              # 8

result = power(2)(5)    # 2^5
print(result)            # 32
```

> 这就是**闭包 (Closure)** 的概念！函数返回另一个函数。

---

## 💻 练习题

### 1. 过滤负数和零

```python
numbers = [-4, -3, -2, -1, 0, 2, 4, 6]
# 用列表推导式过滤出负数和零
result = [i for i in numbers if i <= 0]
print(result)  # [-4, -3, -2, -1, 0]
```

### 2. 三维列表展平

```python
list_of_lists = [[[1, 2, 3]], [[4, 5, 6]], [[7, 8, 9]]]
# 输出: [1, 2, 3, 4, 5, 6, 7, 8, 9]
flattened = [num for outer in list_of_lists for inner in outer for num in inner]
print(flattened)
```

### 3. 生成幂次元组

```python
# 生成: (n, n^0, n^1, n^2, n^3, n^4, n^5)
result = [(n, n**0, n**1, n**2, n**3, n**4, n**5) for n in range(11)]
print(result)
# [(0, 1, 0, 0, 0, 0, 0),
#  (1, 1, 1, 1, 1, 1, 1),
#  (2, 1, 2, 4, 8, 16, 32), ...]
```

### 4. 用Lambda计算斜率

```python
# 线性函数 y = mx + b
# 斜率 m = (y2-y1)/(x2-x1)
slope = lambda x1, y1, x2, y2: (y2 - y1) / (x2 - x1)
print(slope(0, 0, 2, 4))  # 2.0
```

---

## 📊 对比总结

| 特性 | 传统 for 循环 | 列表推导式 |
|------|--------------|-----------|
| 代码量 | 多 | 少 |
| 可读性 | 一般 | 高（熟练后）|
| 执行速度 | 较慢 | 较快 |
| 灵活性 | 高 | 中等 |

| 特性 | 普通函数 | Lambda |
|------|---------|--------|
| 关键字 | `def` | `lambda` |
| 名称 | 有名字 | 匿名 |
| 语句数 | 多条 | 只有一个表达式 |
| 用途 | 复杂逻辑 | 简单操作、回调 |

---

> 📌 **教授寄语**：列表推导式是Python的精髓之一，熟练掌握后你会发现代码变得如诗般优雅！Lambda则在函数式编程中大显身手，在高阶函数中你会更深刻理解Lambda的威力！

